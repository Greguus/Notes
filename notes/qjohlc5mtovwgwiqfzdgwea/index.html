<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><link rel="icon" href="/Notes/favicon.ico"/><title>Dell Server Fan Tamer</title><meta name="robots" content="index,follow"/><meta name="googlebot" content="index,follow"/><meta name="description" content="Personal Knowledge Space"/><meta property="og:title" content="Dell Server Fan Tamer"/><meta property="og:description" content="Personal Knowledge Space"/><meta property="og:url" content="https://greguus.github.io//Notes/notes/qjohlc5mtovwgwiqfzdgwea/"/><meta property="og:type" content="article"/><meta property="article:published_time" content="1/8/2023"/><meta property="article:modified_time" content="1/9/2023"/><link rel="canonical" href="https://greguus.github.io//Notes/notes/qjohlc5mtovwgwiqfzdgwea/"/><meta name="next-head-count" content="14"/><link rel="preload" href="/Notes/_next/static/css/1ff0b9d7e742b4b0.css" as="style"/><link rel="stylesheet" href="/Notes/_next/static/css/1ff0b9d7e742b4b0.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/Notes/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/Notes/_next/static/chunks/webpack-25e92ed568969c7e.js" defer=""></script><script src="/Notes/_next/static/chunks/framework-28c999baf2863c3d.js" defer=""></script><script src="/Notes/_next/static/chunks/main-42985e5d01110972.js" defer=""></script><script src="/Notes/_next/static/chunks/pages/_app-735832bdabb9d926.js" defer=""></script><script src="/Notes/_next/static/chunks/935-4dee79e80b8641c6.js" defer=""></script><script src="/Notes/_next/static/chunks/6-50972def09142ee2.js" defer=""></script><script src="/Notes/_next/static/chunks/pages/notes/%5Bid%5D-78d472fa3b924116.js" defer=""></script><script src="/Notes/_next/static/j9CSGb22FfOPbRIS6QcPV/_buildManifest.js" defer=""></script><script src="/Notes/_next/static/j9CSGb22FfOPbRIS6QcPV/_ssgManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><section class="ant-layout" style="width:100%;min-height:100%"><header class="ant-layout-header" style="position:fixed;isolation:isolate;z-index:1;width:100%;border-bottom:1px solid #d4dadf;height:64px;padding:0 24px 0 2px"><div class="ant-row ant-row-center" style="max-width:992px;justify-content:space-between;margin:0 auto"><div style="display:flex" class="ant-col ant-col-xs-20 ant-col-sm-4"></div><div class="ant-col gutter-row ant-col-xs-0 ant-col-sm-20 ant-col-md-20 ant-col-lg-19"><div class="ant-select ant-select-lg ant-select-auto-complete ant-select-single ant-select-allow-clear ant-select-show-search" style="width:100%"><div class="ant-select-selector"><span class="ant-select-selection-search"><input type="search" autoComplete="off" class="ant-select-selection-search-input" role="combobox" aria-haspopup="listbox" aria-owns="undefined_list" aria-autocomplete="list" aria-controls="undefined_list" aria-activedescendant="undefined_list_0" value=""/></span><span class="ant-select-selection-placeholder">For full text search please use the &#x27;?&#x27; prefix. e.g. ? Onboarding</span></div></div></div><div style="display:none;align-items:center;justify-content:center" class="ant-col ant-col-xs-4 ant-col-sm-4 ant-col-md-0 ant-col-lg-0"><span role="img" aria-label="menu" style="font-size:24px" tabindex="-1" class="anticon anticon-menu"><svg viewBox="64 64 896 896" focusable="false" data-icon="menu" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M904 160H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0 624H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0-312H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z"></path></svg></span></div></div></header><section class="ant-layout" style="margin-top:64px;display:flex;flex-direction:row"><div class="site-layout-sidebar" style="flex:0 0 auto;width:calc(max((100% - 992px) / 2, 0px) + 200px);min-width:200px;padding-left:calc((100% - 992px) / 2)"><aside class="ant-layout-sider ant-layout-sider-dark" style="position:fixed;overflow:auto;height:calc(100vh - 64px);background-color:transparent;flex:0 0 200px;max-width:200px;min-width:200px;width:200px"><div class="ant-layout-sider-children"></div></aside></div><main class="ant-layout-content side-layout-main" style="max-width:1200px;min-width:0;display:block"><div style="padding:0 24px"><div class="main-content" role="main"><div class="ant-row"><div class="ant-col ant-col-24"><div class="ant-row" style="margin-left:-10px;margin-right:-10px"><div style="padding-left:10px;padding-right:10px" class="ant-col ant-col-xs-24 ant-col-md-18"><div><h1 id="dell-server-fan-tamer">Dell Server Fan Tamer<a aria-hidden="true" class="anchor-heading icon-link" href="#dell-server-fan-tamer"></a></h1>
<h2 id="dell-server-fan-tamer-1">Dell Server Fan Tamer<a aria-hidden="true" class="anchor-heading icon-link" href="#dell-server-fan-tamer-1"></a></h2>
<p>Copy the code below and modify to your content. Comments inside the script explain how to use this script and what tools are required.
I have used this script on <strong>Dell R710</strong> (an oldie I know) with a great success.
With some tweaking it will work with other models too.
I have adapted it to <strong>Dell R210</strong> also but those servers have minimum fan speed around 5250 RPM which is still audible. Below that speed, fans just stop which is not really desirable ;) </p>
<pre class="language-sh"><code class="language-sh">#!/bin/bash

#This script makes Dell servers like R710 and other super quiet for home lab use.  
#I have chosen readings from hottest cores on each cpu in order to regulate the fan speed.  
#To control fan speed we need ipmitool.  
#Install with: &#x3C;sudo apt install ipmitool>  
#To identify hot cores or to check cpu temperatures in general, use sensors.  
#To install: &#x3C;sudo apt install lm-sensors>  
#I running it as a cron job every 1 minute.  
#Server on every reboot/power loss will revert to default fan speed control.  

hotcorecpu1=$(sensors coretemp-isa-0000 | grep "Core 9:" | awk -F '[+.0]' {'print $2'})  
hotcorecpu2=$(sensors coretemp-isa-0001 | grep "Core 0:" | awk -F '[+.0]' {'print $2'})  
	
#Switch off automatic fan speed control
#You can leave this command here or add it as a cron job on each reboot and then comment it out here. 
#Without it automatic fan control will be restored within few seconds.
	
	ipmitool -U root -P calvin raw 0x30 0x30 0x01 0x00

#HOW I RUN IT:
#Add this record to your crontab -e (root cronjobs):
#	*/1 * * * *     /bin/fancontrol.sh #to run script every 1 minute in root cronjobs

#Testing readings:
#echo $hotcorecpu1
#echo $hotcorecpu2


	if [[($hotcorecpu1 -ge 1) || ($hotcorecpu2 -ge 1)]] &#x26;&#x26; [[($hotcorecpu1 -lt 41) || ($hotcorecpu2 -lt 41)]]
		then
		ipmitool -U root -P calvin raw 0x30 0x30 0x02 0xff 0x04 #4% of fan speed
	elif [[($hotcorecpu1 -ge 41) || ($hotcorecpu2 -ge 41)]] &#x26;&#x26; [[($hotcorecpu1 -lt 45) || ($hotcorecpu2 -lt 45)]]
		then
		ipmitool -U root -P calvin raw 0x30 0x30 0x02 0xff 0x0a #10% of fan speed
	elif [[($hotcorecpu1 -ge 45) || ($hotcorecpu2 -ge 45)]] &#x26;&#x26; [[($hotcorecpu1 -lt 51) || ($hotcorecpu2 -lt 51)]]
		then
		ipmitool -U root -P calvin raw 0x30 0x30 0x02 0xff 0x14 #20% of fan speed
	elif [[($hotcorecpu1 -ge 51) || ($hotcorecpu2 -ge 51)]] &#x26;&#x26; [[($hotcorecpu1 -lt 55) || ($hotcorecpu2 -lt 55)]]
		then
		ipmitool -U root -P calvin raw 0x30 0x30 0x02 0x23 0x1e #35% of fan speed
	elif [[($hotcorecpu1 -ge 55) || ($hotcorecpu2 -ge 55)]] &#x26;&#x26; [[($hotcorecpu1 -lt 64) || ($hotcorecpu2 -lt 64)]]
		then
        ipmitool -U root -P calvin raw 0x30 0x30 0x02 0xff 0x32 #50% of fan speed
	else #panic mode
		ipmitool -U root -P calvin raw 0x30 0x30 0x02 0xff 0x50 #80% of fan speed
	fi

#To check fans speed at any time run (this command should work remotely also as it is connects to your iDrac):
# ipmitool -I lanplus -H &#x3C;YOUR IP> -U root -P calvin sdr elist all | grep -i fan
	
#Enjoy silent server!
</code></pre>
<h2 id="download">Download:<a aria-hidden="true" class="anchor-heading icon-link" href="#download"></a></h2>
<p><a href="https://github.com/Greguus/Notes/blob/main/fancontrol.sh">fancontrol.sh</a></p>
<hr>
<strong>Backlinks</strong>
<ul>
<li><a href="/Notes/notes/kh3qu6gbkqp3jojuo9qgkzl">SCRIPTS:</a></li>
</ul></div></div><div style="padding-left:10px;padding-right:10px" class="ant-col ant-col-xs-0 ant-col-md-6"><div><div class=""><div class="ant-anchor-wrapper dendron-toc" style="max-height:calc(100vh - 64px);z-index:1"><div class="ant-anchor"><div class="ant-anchor-ink"><span class="ant-anchor-ink-ball"></span></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#dell-server-fan-tamer" title="Dell Server Fan Tamer">Dell Server Fan Tamer</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#download" title="Download:">Download:</a></div></div></div></div></div></div></div></div></div></div></div><div class="ant-divider ant-divider-horizontal" role="separator"></div><footer class="ant-layout-footer" style="padding:0 24px 24px"></footer></main></section></section></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"note":{"id":"qjohlc5mtovwgwiqfzdgwea","title":"Dell Server Fan Tamer","desc":"","updated":1673228799357,"created":1673137361927,"custom":{},"fname":"HOT HomeLab Of Things.SCRIPTS.Dell Server Fan Tamer","type":"note","vault":{"fsPath":".","selfContained":true,"name":"Cybersecurity_Notes"},"contentHash":"5aba8bfa1654d2c7dd90f806652baf3c","links":[{"from":{"fname":"HOT HomeLab Of Things.SCRIPTS","id":"kh3qu6gbkqp3jojuo9qgkzl","vaultName":"Cybersecurity_Notes"},"type":"backlink","position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":1,"column":100,"offset":99},"indent":[]},"value":"HOT HomeLab Of Things.SCRIPTS.Dell Server Fan Tamer"}],"anchors":{"dell-server-fan-tamer":{"type":"header","text":"Dell Server Fan Tamer","value":"dell-server-fan-tamer","line":8,"column":0,"depth":2},"download":{"type":"header","text":"Download:","value":"download","line":69,"column":0,"depth":2}},"children":[],"parent":"kh3qu6gbkqp3jojuo9qgkzl","data":{}},"body":"\u003ch1 id=\"dell-server-fan-tamer\"\u003eDell Server Fan Tamer\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#dell-server-fan-tamer\"\u003e\u003c/a\u003e\u003c/h1\u003e\n\u003ch2 id=\"dell-server-fan-tamer-1\"\u003eDell Server Fan Tamer\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#dell-server-fan-tamer-1\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eCopy the code below and modify to your content. Comments inside the script explain how to use this script and what tools are required.\nI have used this script on \u003cstrong\u003eDell R710\u003c/strong\u003e (an oldie I know) with a great success.\nWith some tweaking it will work with other models too.\nI have adapted it to \u003cstrong\u003eDell R210\u003c/strong\u003e also but those servers have minimum fan speed around 5250 RPM which is still audible. Below that speed, fans just stop which is not really desirable ;) \u003c/p\u003e\n\u003cpre class=\"language-sh\"\u003e\u003ccode class=\"language-sh\"\u003e#!/bin/bash\n\n#This script makes Dell servers like R710 and other super quiet for home lab use.  \n#I have chosen readings from hottest cores on each cpu in order to regulate the fan speed.  \n#To control fan speed we need ipmitool.  \n#Install with: \u0026#x3C;sudo apt install ipmitool\u003e  \n#To identify hot cores or to check cpu temperatures in general, use sensors.  \n#To install: \u0026#x3C;sudo apt install lm-sensors\u003e  \n#I running it as a cron job every 1 minute.  \n#Server on every reboot/power loss will revert to default fan speed control.  \n\nhotcorecpu1=$(sensors coretemp-isa-0000 | grep \"Core 9:\" | awk -F '[+.0]' {'print $2'})  \nhotcorecpu2=$(sensors coretemp-isa-0001 | grep \"Core 0:\" | awk -F '[+.0]' {'print $2'})  \n\t\n#Switch off automatic fan speed control\n#You can leave this command here or add it as a cron job on each reboot and then comment it out here. \n#Without it automatic fan control will be restored within few seconds.\n\t\n\tipmitool -U root -P calvin raw 0x30 0x30 0x01 0x00\n\n#HOW I RUN IT:\n#Add this record to your crontab -e (root cronjobs):\n#\t*/1 * * * *     /bin/fancontrol.sh #to run script every 1 minute in root cronjobs\n\n#Testing readings:\n#echo $hotcorecpu1\n#echo $hotcorecpu2\n\n\n\tif [[($hotcorecpu1 -ge 1) || ($hotcorecpu2 -ge 1)]] \u0026#x26;\u0026#x26; [[($hotcorecpu1 -lt 41) || ($hotcorecpu2 -lt 41)]]\n\t\tthen\n\t\tipmitool -U root -P calvin raw 0x30 0x30 0x02 0xff 0x04 #4% of fan speed\n\telif [[($hotcorecpu1 -ge 41) || ($hotcorecpu2 -ge 41)]] \u0026#x26;\u0026#x26; [[($hotcorecpu1 -lt 45) || ($hotcorecpu2 -lt 45)]]\n\t\tthen\n\t\tipmitool -U root -P calvin raw 0x30 0x30 0x02 0xff 0x0a #10% of fan speed\n\telif [[($hotcorecpu1 -ge 45) || ($hotcorecpu2 -ge 45)]] \u0026#x26;\u0026#x26; [[($hotcorecpu1 -lt 51) || ($hotcorecpu2 -lt 51)]]\n\t\tthen\n\t\tipmitool -U root -P calvin raw 0x30 0x30 0x02 0xff 0x14 #20% of fan speed\n\telif [[($hotcorecpu1 -ge 51) || ($hotcorecpu2 -ge 51)]] \u0026#x26;\u0026#x26; [[($hotcorecpu1 -lt 55) || ($hotcorecpu2 -lt 55)]]\n\t\tthen\n\t\tipmitool -U root -P calvin raw 0x30 0x30 0x02 0x23 0x1e #35% of fan speed\n\telif [[($hotcorecpu1 -ge 55) || ($hotcorecpu2 -ge 55)]] \u0026#x26;\u0026#x26; [[($hotcorecpu1 -lt 64) || ($hotcorecpu2 -lt 64)]]\n\t\tthen\n        ipmitool -U root -P calvin raw 0x30 0x30 0x02 0xff 0x32 #50% of fan speed\n\telse #panic mode\n\t\tipmitool -U root -P calvin raw 0x30 0x30 0x02 0xff 0x50 #80% of fan speed\n\tfi\n\n#To check fans speed at any time run (this command should work remotely also as it is connects to your iDrac):\n# ipmitool -I lanplus -H \u0026#x3C;YOUR IP\u003e -U root -P calvin sdr elist all | grep -i fan\n\t\n#Enjoy silent server!\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"download\"\u003eDownload:\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#download\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/Greguus/Notes/blob/main/fancontrol.sh\"\u003efancontrol.sh\u003c/a\u003e\u003c/p\u003e\n\u003chr\u003e\n\u003cstrong\u003eBacklinks\u003c/strong\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/Notes/notes/kh3qu6gbkqp3jojuo9qgkzl\"\u003eSCRIPTS:\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e","noteIndex":{"id":"dkhaxs77zw01c445jl4oetr","title":"My Dendron Notes","desc":"","updated":1703545954419,"created":1673083387776,"custom":{"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":".","selfContained":true,"name":"Cybersecurity_Notes"},"contentHash":"7f471efbabd9262e18133bac0489cf83","links":[],"anchors":{"welcome-to-my-dendron-notes":{"type":"header","text":"Welcome to my Dendron Notes:","value":"welcome-to-my-dendron-notes","line":7,"column":0,"depth":1},"lookup":{"type":"header","text":"Lookup","value":"lookup","line":11,"column":0,"depth":2}},"children":["irggoj29glx2y8z3yum2w64","t7zelcb6b17opo2gjy4y9cq","h42642wolzf824la84a6bb7","m7j2ktba2hjk9l6avnxa7bw"],"parent":null,"data":{},"body":"# Welcome to my Dendron Notes:\n\nI am a Cyber Security Analyst/Network Administrator. A highly motivated and energetic individual, ready to start work as soon as possible. Ready to learn new skills, take on challenges and complete any education/licensing examinations necessary for career growth. Proactive critical thinker and quick learner with extremely strong work ethic. An effective problem solver who brings both technical aptitude and an understanding of business processes. Able to leverage background in finance and technical skills to evaluate complex problems faced by business. Motivated by innovation and seeking to join an organisation that will provide opportunities for professional development in a dynamic and technical team environment. Passionate about cyber security and focused on governance, risk and compliance. Member of AISA (Australian Information Security Association).\n\n## Lookup\n\nThis section contains useful links to related resources.\n\n- [Getting Started Guide](https://link.dendron.so/6b25)\n- [Discord](https://link.dendron.so/6b23)\n- [Home Page](https://wiki.dendron.so/)\n- [Github](https://link.dendron.so/6b24)\n- [Developer Docs](https://docs.dendron.so/)"},"collectionChildren":null,"customHeadContent":null,"config":{"version":5,"dev":{"enablePreviewV2":true,"enableSelfContainedVaults":true},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":true,"vaultSelectionModeOnCreate":"smart","leaveTrace":false,"bubbleUpCreateNew":true,"fuzzThreshold":0.2}},"randomNote":{},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"copyNoteLink":{"aliasMode":"title"},"templateHierarchy":"template"},"workspace":{"vaults":[{"fsPath":".","selfContained":true,"name":"Cybersecurity_Notes"}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"task":{"name":"task","dateFormat":"y.MM.dd","addBehavior":"asOwnDomain","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"taskCompleteStatus":["done","x"],"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link"},"graph":{"zoomSpeed":1,"createStub":false},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"enableUserTags":true,"enableHashTags":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":false,"enableEditorDecorations":true,"maxPreviewsCached":10,"maxNoteLength":204800,"enableFullHierarchyNoteTitle":false},"preview":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enablePrettyRefs":true,"enableKatex":true,"automaticallyShowPreview":false},"publishing":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enablePrettyRefs":true,"enableKatex":true,"copyAssets":true,"siteHierarchies":["root"],"writeStubs":false,"siteRootDir":"docs","seo":{"title":"My Dendron Notes","description":"Personal Knowledge Space"},"github":{"enableEditLink":true,"editLinkText":"Edit this page on GitHub","editBranch":"main","editViewMode":"tree"},"enableSiteLastModified":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableRandomlyColoredTags":true,"enableTaskNotes":true,"enablePrettyLinks":true,"searchMode":"search","assetsPrefix":"/Notes","siteUrl":"https://greguus.github.io/","enableHierarchyDisplay":false,"siteFaviconPath":"favicon.ico","siteIndex":"root"}}},"__N_SSG":true},"page":"/notes/[id]","query":{"id":"qjohlc5mtovwgwiqfzdgwea"},"buildId":"j9CSGb22FfOPbRIS6QcPV","assetPrefix":"/Notes","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>