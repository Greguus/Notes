{"pageProps":{"note":{"id":"qjohlc5mtovwgwiqfzdgwea","title":"Dell Server Fan Tamer","desc":"","updated":1673228799357,"created":1673137361927,"custom":{},"fname":"HOT HomeLab Of Things.SCRIPTS.Dell Server Fan Tamer","type":"note","vault":{"fsPath":".","selfContained":true,"name":"Cybersecurity_Notes"},"contentHash":"5aba8bfa1654d2c7dd90f806652baf3c","links":[{"from":{"fname":"HOT HomeLab Of Things.SCRIPTS","id":"kh3qu6gbkqp3jojuo9qgkzl","vaultName":"Cybersecurity_Notes"},"type":"backlink","position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":1,"column":100,"offset":99},"indent":[]},"value":"HOT HomeLab Of Things.SCRIPTS.Dell Server Fan Tamer"}],"anchors":{"dell-server-fan-tamer":{"type":"header","text":"Dell Server Fan Tamer","value":"dell-server-fan-tamer","line":8,"column":0,"depth":2},"download":{"type":"header","text":"Download:","value":"download","line":69,"column":0,"depth":2}},"children":[],"parent":"kh3qu6gbkqp3jojuo9qgkzl","data":{}},"body":"<h1 id=\"dell-server-fan-tamer\">Dell Server Fan Tamer<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#dell-server-fan-tamer\"></a></h1>\n<h2 id=\"dell-server-fan-tamer-1\">Dell Server Fan Tamer<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#dell-server-fan-tamer-1\"></a></h2>\n<p>Copy the code below and modify to your content. Comments inside the script explain how to use this script and what tools are required.\nI have used this script on <strong>Dell R710</strong> (an oldie I know) with a great success.\nWith some tweaking it will work with other models too.\nI have adapted it to <strong>Dell R210</strong> also but those servers have minimum fan speed around 5250 RPM which is still audible. Below that speed, fans just stop which is not really desirable ;) </p>\n<pre class=\"language-sh\"><code class=\"language-sh\">#!/bin/bash\n\n#This script makes Dell servers like R710 and other super quiet for home lab use.  \n#I have chosen readings from hottest cores on each cpu in order to regulate the fan speed.  \n#To control fan speed we need ipmitool.  \n#Install with: &#x3C;sudo apt install ipmitool>  \n#To identify hot cores or to check cpu temperatures in general, use sensors.  \n#To install: &#x3C;sudo apt install lm-sensors>  \n#I running it as a cron job every 1 minute.  \n#Server on every reboot/power loss will revert to default fan speed control.  \n\nhotcorecpu1=$(sensors coretemp-isa-0000 | grep \"Core 9:\" | awk -F '[+.0]' {'print $2'})  \nhotcorecpu2=$(sensors coretemp-isa-0001 | grep \"Core 0:\" | awk -F '[+.0]' {'print $2'})  \n\t\n#Switch off automatic fan speed control\n#You can leave this command here or add it as a cron job on each reboot and then comment it out here. \n#Without it automatic fan control will be restored within few seconds.\n\t\n\tipmitool -U root -P calvin raw 0x30 0x30 0x01 0x00\n\n#HOW I RUN IT:\n#Add this record to your crontab -e (root cronjobs):\n#\t*/1 * * * *     /bin/fancontrol.sh #to run script every 1 minute in root cronjobs\n\n#Testing readings:\n#echo $hotcorecpu1\n#echo $hotcorecpu2\n\n\n\tif [[($hotcorecpu1 -ge 1) || ($hotcorecpu2 -ge 1)]] &#x26;&#x26; [[($hotcorecpu1 -lt 41) || ($hotcorecpu2 -lt 41)]]\n\t\tthen\n\t\tipmitool -U root -P calvin raw 0x30 0x30 0x02 0xff 0x04 #4% of fan speed\n\telif [[($hotcorecpu1 -ge 41) || ($hotcorecpu2 -ge 41)]] &#x26;&#x26; [[($hotcorecpu1 -lt 45) || ($hotcorecpu2 -lt 45)]]\n\t\tthen\n\t\tipmitool -U root -P calvin raw 0x30 0x30 0x02 0xff 0x0a #10% of fan speed\n\telif [[($hotcorecpu1 -ge 45) || ($hotcorecpu2 -ge 45)]] &#x26;&#x26; [[($hotcorecpu1 -lt 51) || ($hotcorecpu2 -lt 51)]]\n\t\tthen\n\t\tipmitool -U root -P calvin raw 0x30 0x30 0x02 0xff 0x14 #20% of fan speed\n\telif [[($hotcorecpu1 -ge 51) || ($hotcorecpu2 -ge 51)]] &#x26;&#x26; [[($hotcorecpu1 -lt 55) || ($hotcorecpu2 -lt 55)]]\n\t\tthen\n\t\tipmitool -U root -P calvin raw 0x30 0x30 0x02 0x23 0x1e #35% of fan speed\n\telif [[($hotcorecpu1 -ge 55) || ($hotcorecpu2 -ge 55)]] &#x26;&#x26; [[($hotcorecpu1 -lt 64) || ($hotcorecpu2 -lt 64)]]\n\t\tthen\n        ipmitool -U root -P calvin raw 0x30 0x30 0x02 0xff 0x32 #50% of fan speed\n\telse #panic mode\n\t\tipmitool -U root -P calvin raw 0x30 0x30 0x02 0xff 0x50 #80% of fan speed\n\tfi\n\n#To check fans speed at any time run (this command should work remotely also as it is connects to your iDrac):\n# ipmitool -I lanplus -H &#x3C;YOUR IP> -U root -P calvin sdr elist all | grep -i fan\n\t\n#Enjoy silent server!\n</code></pre>\n<h2 id=\"download\">Download:<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#download\"></a></h2>\n<p><a href=\"https://github.com/Greguus/Notes/blob/main/fancontrol.sh\">fancontrol.sh</a></p>\n<hr>\n<strong>Backlinks</strong>\n<ul>\n<li><a href=\"/Notes/notes/kh3qu6gbkqp3jojuo9qgkzl\">SCRIPTS:</a></li>\n</ul>","noteIndex":{"id":"dkhaxs77zw01c445jl4oetr","title":"My Dendron Notes","desc":"","updated":1703545954419,"created":1673083387776,"custom":{"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":".","selfContained":true,"name":"Cybersecurity_Notes"},"contentHash":"7f471efbabd9262e18133bac0489cf83","links":[],"anchors":{"welcome-to-my-dendron-notes":{"type":"header","text":"Welcome to my Dendron Notes:","value":"welcome-to-my-dendron-notes","line":7,"column":0,"depth":1},"lookup":{"type":"header","text":"Lookup","value":"lookup","line":11,"column":0,"depth":2}},"children":["irggoj29glx2y8z3yum2w64","t7zelcb6b17opo2gjy4y9cq","h42642wolzf824la84a6bb7","m7j2ktba2hjk9l6avnxa7bw"],"parent":null,"data":{},"body":"# Welcome to my Dendron Notes:\n\nI am a Cyber Security Analyst/Network Administrator. A highly motivated and energetic individual, ready to start work as soon as possible. Ready to learn new skills, take on challenges and complete any education/licensing examinations necessary for career growth. Proactive critical thinker and quick learner with extremely strong work ethic. An effective problem solver who brings both technical aptitude and an understanding of business processes. Able to leverage background in finance and technical skills to evaluate complex problems faced by business. Motivated by innovation and seeking to join an organisation that will provide opportunities for professional development in a dynamic and technical team environment. Passionate about cyber security and focused on governance, risk and compliance. Member of AISA (Australian Information Security Association).\n\n## Lookup\n\nThis section contains useful links to related resources.\n\n- [Getting Started Guide](https://link.dendron.so/6b25)\n- [Discord](https://link.dendron.so/6b23)\n- [Home Page](https://wiki.dendron.so/)\n- [Github](https://link.dendron.so/6b24)\n- [Developer Docs](https://docs.dendron.so/)"},"collectionChildren":null,"customHeadContent":null,"config":{"version":5,"dev":{"enablePreviewV2":true,"enableSelfContainedVaults":true},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":true,"vaultSelectionModeOnCreate":"smart","leaveTrace":false,"bubbleUpCreateNew":true,"fuzzThreshold":0.2}},"randomNote":{},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"copyNoteLink":{"aliasMode":"title"},"templateHierarchy":"template"},"workspace":{"vaults":[{"fsPath":".","selfContained":true,"name":"Cybersecurity_Notes"}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"task":{"name":"task","dateFormat":"y.MM.dd","addBehavior":"asOwnDomain","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"taskCompleteStatus":["done","x"],"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link"},"graph":{"zoomSpeed":1,"createStub":false},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"enableUserTags":true,"enableHashTags":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":false,"enableEditorDecorations":true,"maxPreviewsCached":10,"maxNoteLength":204800,"enableFullHierarchyNoteTitle":false},"preview":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enablePrettyRefs":true,"enableKatex":true,"automaticallyShowPreview":false},"publishing":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enablePrettyRefs":true,"enableKatex":true,"copyAssets":true,"siteHierarchies":["root"],"writeStubs":false,"siteRootDir":"docs","seo":{"title":"My Dendron Notes","description":"Personal Knowledge Space"},"github":{"enableEditLink":true,"editLinkText":"Edit this page on GitHub","editBranch":"main","editViewMode":"tree"},"enableSiteLastModified":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableRandomlyColoredTags":true,"enableTaskNotes":true,"enablePrettyLinks":true,"searchMode":"search","assetsPrefix":"/Notes","siteUrl":"https://greguus.github.io/","enableHierarchyDisplay":false,"siteFaviconPath":"favicon.ico","siteIndex":"root"}}},"__N_SSG":true}