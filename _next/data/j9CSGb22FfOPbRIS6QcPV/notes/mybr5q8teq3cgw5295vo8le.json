{"pageProps":{"note":{"id":"mybr5q8teq3cgw5295vo8le","title":"Controlled_Node_Setup","desc":"","updated":1675600464838,"created":1673951621086,"custom":{},"fname":"HOT HomeLab Of Things.ANSIBLE.Controlled_Node_Setup","type":"note","vault":{"fsPath":".","selfContained":true,"name":"Cybersecurity_Notes"},"contentHash":"a4ebc8ba6bc69aaad8e6a6ab1fe3cc2c","links":[{"from":{"fname":"HOT HomeLab Of Things.ANSIBLE","id":"om8an351xireaxm8fnh4lcl","vaultName":"Cybersecurity_Notes"},"type":"backlink","position":{"start":{"line":3,"column":1,"offset":34},"end":{"line":3,"column":78,"offset":111},"indent":[]},"value":"HOT HomeLab Of Things.ANSIBLE.Controlled_Node_Setup"}],"anchors":{"controlled-node-setup":{"type":"header","text":"Controlled Node Setup","value":"controlled-node-setup","line":8,"column":0,"depth":2}},"children":[],"parent":"om8an351xireaxm8fnh4lcl","data":{}},"body":"<h1 id=\"controlled_node_setup\">Controlled_Node_Setup<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#controlled_node_setup\"></a></h1>\n<h2 id=\"controlled-node-setup\">Controlled Node Setup<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#controlled-node-setup\"></a></h2>\n<p>Temporary draft (work in progress):</p>\n<pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token punctuation\">---</span>\n\n<span class=\"token punctuation\">-</span> <span class=\"token key atrule\">hosts</span><span class=\"token punctuation\">:</span> all\n  <span class=\"token key atrule\">tasks</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Add the user 'ansible'\n      <span class=\"token key atrule\">ansible.builtin.user</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> ansible\n        <span class=\"token key atrule\">comment</span><span class=\"token punctuation\">:</span> ansible\n        <span class=\"token key atrule\">shell</span><span class=\"token punctuation\">:</span> /bin/bash\n        <span class=\"token key atrule\">create_home</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n        <span class=\"token key atrule\">state</span><span class=\"token punctuation\">:</span> present\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Add user 'ansible' to sudoers\n      <span class=\"token key atrule\">lineinfile</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> /etc/sudoers\n        <span class=\"token key atrule\">regexp</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'^ansible'</span>\n        <span class=\"token key atrule\">line</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'ansible ALL=(ALL) NOPASSWD: ALL'</span>\n        <span class=\"token key atrule\">validate</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'visudo -cf %s'</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Remove 'authorized_keys' with root key\n      <span class=\"token key atrule\">become</span><span class=\"token punctuation\">:</span> yes\n      <span class=\"token key atrule\">ansible.builtin.file</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> /root/.ssh/authorized_keys\n        <span class=\"token key atrule\">state</span><span class=\"token punctuation\">:</span> absent\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Set ssh key from file\n      <span class=\"token key atrule\">authorized_key</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">user</span><span class=\"token punctuation\">:</span> ansible\n        <span class=\"token key atrule\">state</span><span class=\"token punctuation\">:</span> present\n        <span class=\"token key atrule\">key</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"{{ lookup('file', '/home/ansible/.ssh/id_rsa.pub') }}\"</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Set \"PermitRootLogin\" to no\n      <span class=\"token key atrule\">lineinfile</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> /etc/ssh/sshd_config\n        <span class=\"token key atrule\">regexp</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'^PermitRootLogin'</span>\n        <span class=\"token key atrule\">line</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'PermitRootLogin prohibit-password'</span>\n        <span class=\"token key atrule\">state</span><span class=\"token punctuation\">:</span> present\n\n</code></pre>\n<hr>\n<strong>Backlinks</strong>\n<ul>\n<li><a href=\"/Notes/notes/om8an351xireaxm8fnh4lcl\">ANSIBLE</a></li>\n</ul>","noteIndex":{"id":"dkhaxs77zw01c445jl4oetr","title":"My Dendron Notes","desc":"","updated":1703545954419,"created":1673083387776,"custom":{"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":".","selfContained":true,"name":"Cybersecurity_Notes"},"contentHash":"7f471efbabd9262e18133bac0489cf83","links":[],"anchors":{"welcome-to-my-dendron-notes":{"type":"header","text":"Welcome to my Dendron Notes:","value":"welcome-to-my-dendron-notes","line":7,"column":0,"depth":1},"lookup":{"type":"header","text":"Lookup","value":"lookup","line":11,"column":0,"depth":2}},"children":["irggoj29glx2y8z3yum2w64","t7zelcb6b17opo2gjy4y9cq","h42642wolzf824la84a6bb7","m7j2ktba2hjk9l6avnxa7bw"],"parent":null,"data":{},"body":"# Welcome to my Dendron Notes:\n\nI am a Cyber Security Analyst/Network Administrator. A highly motivated and energetic individual, ready to start work as soon as possible. Ready to learn new skills, take on challenges and complete any education/licensing examinations necessary for career growth. Proactive critical thinker and quick learner with extremely strong work ethic. An effective problem solver who brings both technical aptitude and an understanding of business processes. Able to leverage background in finance and technical skills to evaluate complex problems faced by business. Motivated by innovation and seeking to join an organisation that will provide opportunities for professional development in a dynamic and technical team environment. Passionate about cyber security and focused on governance, risk and compliance. Member of AISA (Australian Information Security Association).\n\n## Lookup\n\nThis section contains useful links to related resources.\n\n- [Getting Started Guide](https://link.dendron.so/6b25)\n- [Discord](https://link.dendron.so/6b23)\n- [Home Page](https://wiki.dendron.so/)\n- [Github](https://link.dendron.so/6b24)\n- [Developer Docs](https://docs.dendron.so/)"},"collectionChildren":null,"customHeadContent":null,"config":{"version":5,"dev":{"enablePreviewV2":true,"enableSelfContainedVaults":true},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":true,"vaultSelectionModeOnCreate":"smart","leaveTrace":false,"bubbleUpCreateNew":true,"fuzzThreshold":0.2}},"randomNote":{},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"copyNoteLink":{"aliasMode":"title"},"templateHierarchy":"template"},"workspace":{"vaults":[{"fsPath":".","selfContained":true,"name":"Cybersecurity_Notes"}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"task":{"name":"task","dateFormat":"y.MM.dd","addBehavior":"asOwnDomain","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"taskCompleteStatus":["done","x"],"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link"},"graph":{"zoomSpeed":1,"createStub":false},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"enableUserTags":true,"enableHashTags":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":false,"enableEditorDecorations":true,"maxPreviewsCached":10,"maxNoteLength":204800,"enableFullHierarchyNoteTitle":false},"preview":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enablePrettyRefs":true,"enableKatex":true,"automaticallyShowPreview":false},"publishing":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enablePrettyRefs":true,"enableKatex":true,"copyAssets":true,"siteHierarchies":["root"],"writeStubs":false,"siteRootDir":"docs","seo":{"title":"My Dendron Notes","description":"Personal Knowledge Space"},"github":{"enableEditLink":true,"editLinkText":"Edit this page on GitHub","editBranch":"main","editViewMode":"tree"},"enableSiteLastModified":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableRandomlyColoredTags":true,"enableTaskNotes":true,"enablePrettyLinks":true,"searchMode":"search","assetsPrefix":"/Notes","siteUrl":"https://greguus.github.io/","enableHierarchyDisplay":false,"siteFaviconPath":"favicon.ico","siteIndex":"root"}}},"__N_SSG":true}